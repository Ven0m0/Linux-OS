[unstable]
cargo-lints = true
feature-unification = true
trim-paths = true
no-embed-metadata = true
gc = true
panic-abort-tests = true
dylib-lto = true
parallel-tests = true # run tests in parallel
doctest = false # let `cargo check` skip devâ€‘dependencies
resolver = "3" # new dependency resolver
# resolver = "2" default

[net]
git-fetch-with-cli = true
retry = 2
# offline = true # do not access the network
offline = false

[http]
debug = false
ssl-version = "tlsv1.3"
ssl-version.max = "tlsv1.3"
ssl-version.min = "tlsv1.2"
check-revoke = false
multiplexing = true

[cache]
auto-clean-frequency = "always" # "1day" default

[build]
jobs = 16
incremental = false
rustc-wrapper = "sccache"

[env]
CARGO_HTTP_MULTIPLEXING = "true"
CARGO_NET_GIT_FETCH_WITH_CLI = "true"
CARGO_HTTP_SSL_VERSION = "tlsv1.3"
RUSTC_WRAPPER = "sccache"
CARGO_INCREMENTAL = "0"
RUST_LOG = "off"
GITOXIDE_CORE_MULTIPACKINDEX = "true"
GITOXIDE_HTTP_SSLVERSIONMAX = "tls1.3"
GITOXIDE_HTTP_SSLVERSIONMIN = "tls1.2"
#RUSTC_BOOTSTRAP = "1"

[registries.crates-io]
protocol = "sparse"

[resolver]
incompatible-rust-versions = "allow"

#[profile.release.build-override]
[profile.release]
opt-level = "3"
codegen-units = "1"
lto = "fat"
panic = "abort"
strip = "symbols"
debug = "false"
debuginfo= "0"
debug_assertions = "off"
split-debuginfo = "off"

[profile.release.package."*"]
inherits = "release"

[profile.dev]
debug = false

[profile.release.build-override]
opt-level = 0
codegen-units = 16 # 256 when not incremental

[target.x86_64-unknown-linux-gnu]
linker = "clang"

[term]
unicode = false # ASCII is faster
color = 'auto'
progress.when = 'auto'
