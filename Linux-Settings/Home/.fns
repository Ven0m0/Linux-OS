#!/bin/bash

mkcd() {
	#shellcheck disable=SC2164
	mkdir -p -- "$1" && cd -- "$1"
}

cdls() {
	cd -- "$1" && ls
}
cdla() {
	cd -- "$1" && ls -A
}

fs() {
	if [ "$#" -gt 0 ]; then
		du -sbh -- "$@"
	else
		# `--` is a micro-optimization.
		# these patterns work poorly with `failglob`.
		du -sbh -- .[!.]* ./* | sort -hr
	fi
}

# Bash-it sudo
function sudo-command-line() {
	[[ ${#READLINE_LINE} -eq 0 ]] && READLINE_LINE=$(fc -l -n -1 | xargs)
	if [[ $READLINE_LINE == sudo\ * ]]; then
		READLINE_LINE="${READLINE_LINE#sudo }"
	else
		READLINE_LINE="sudo $READLINE_LINE"
	fi
	READLINE_POINT=${#READLINE_LINE}
}
# Shortcut keys: [Esc] [Esc], requires astleast bash version 4
if [ "${BASH_VERSINFO[0]}" -ge 4 ]; then
	bind -x '"\e\e": sudo-command-line'
fi
